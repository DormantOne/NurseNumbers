<!DOCTYPE html>
<html>
<head>
  
  
<script type="text/javascript">
    window.onload = function() {
        var referrer = document.referrer;
        var referrerHostname = new URL(referrer).hostname;
        var allowedHostname = new URL("https://myshadysidehandbook-my.sharepoint.com/").hostname;
        if (referrerHostname != allowedHostname) {
            window.location.href = "https://myshadysidehandbook-my.sharepoint.com/:w:/g/personal/adamsohnen_myshadysidehandbook_onmicrosoft_com/EV9wuWxzwIRPtCQNxZ0AOWwB2WVJK2Q8U84Vfbb-VjWwgg?e=nNy034";
        }
    }
</script>

  



  <title>Spreadsheet Data</title>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCYDVebdIbJ7DV_tkqvl6dXacP2gd-V6zo",
  authDomain: "nurse-numbers.firebaseapp.com",
  databaseURL: "https://nurse-numbers-default-rtdb.firebaseio.com",
  projectId: "nurse-numbers",
  storageBucket: "nurse-numbers.appspot.com",
  messagingSenderId: "316071093036",
  appId: "1:316071093036:web:233a3bf23d007bb0a2c289",
  measurementId: "G-RW2RPJS2GC"
};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Function to submit data
    window.submitData = function(room) {
      const nurse = document.getElementById('nurse' + room).value;
      const number = document.getElementById('number' + room).value;
      const timestamp = new Date().toLocaleString();

      const data = {
        room,
        nurse,
        number,
        timestamp
      };

      // Write data to Firebase
      push(ref(db, '/data/' + room), data);
    }

    // Listen for new entries in Firebase
    for (let i = 1; i <= 4; i++) {
      const dataRef = ref(db, '/data/4E Room ' + i);
      onChildAdded(dataRef, (snapshot) => {
        displayData('4E Room ' + i, snapshot.val());
      });
    }
  </script>
</head>
<body>
  <div id="dataContainer"></div>

  <div>
    <h2>Enter Data</h2>
    <div id="entryContainer"></div>
  </div>

  <script>
    const entryContainer = document.getElementById('entryContainer');
    for (let i = 1; i <= 4; i++) {
      entryContainer.innerHTML += `
        <div>
          <h3>4E Room ${i}</h3>
          <select id="nurse4E Room ${i}">
            <option disabled selected>Select Nurse</option>
            <option>Jane Doe</option>
            <option>John Smith</option>
            <option>Emily Johnson</option>
            <option>Michael Brown</option>
            <option>Emma Davis</option>
            <option>James Miller</option>
          </select>

          <select id="number4E Room ${i}">
            <option disabled selected>Select Number</option>
            <option>123456789</option>
            <option>234567890</option>
            <option>345678901</option>
            <option>456789012</option>
            <option>567890123</option>
            <option>678901234</option>
          </select>

          <button onclick="submitData('4E Room ${i}')">Submit</button>
        </div>
      `;
    }

    function displayData(room, data) {
      console.log('Data:', data);

      var dataContainer = document.getElementById('dataContainer');
      dataContainer.innerHTML = `
        <div>
          <p>${room}: ${data.nurse} <a href="tel:${data.number}">${data.number}</a></p>
        </div>
      ` + dataContainer.innerHTML;
    }
  </script>
</body>
</html>
