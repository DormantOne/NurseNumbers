<!DOCTYPE html>
<html>
<head>
  <title>Spreadsheet Data</title>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
    apiKey: "AIzaSyCYDVebdIbJ7DV_tkqvl6dXacP2gd-V6zo",
    authDomain: "nurse-numbers.firebaseapp.com",
    projectId: "nurse-numbers",
    storageBucket: "nurse-numbers.appspot.com",
    messagingSenderId: "316071093036",
    appId: "1:316071093036:web:233a3bf23d007bb0a2c289",
    measurementId: "G-RW2RPJS2GC"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Define rooms, nurses, and numbers
    const rooms = ['Room 1', 'Room 2', 'Room 3', 'Room 4'];
    const nurses = ['Nurse 1', 'Nurse 2', 'Nurse 3', 'Nurse 4', 'Nurse 5'];
    const numbers = ['Number 1', 'Number 2', 'Number 3', 'Number 4', 'Number 5'];

    // Function to submit data
    window.submitData = function() {
      const room = document.getElementById('room').value;
      const nurse = document.getElementById('nurse').value;
      const number = document.getElementById('number').value;
      const timestamp = new Date().toLocaleString();

      const data = {
        room,
        nurse,
        number,
        timestamp
      };

      // Write data to Firebase
      set(ref(db, '/data'), data);

      // Read data from Firebase
      const dataRef = ref(db, '/data');
      get(dataRef).then((snapshot) => {
        if (snapshot.exists()) {
          displayData(snapshot.val());
        } else {
          console.log("No data available");
        }
      }).catch((error) => {
        console.error(error);
      });
    }
  </script>
</head>
<body>
  <div>
    <select id="room">
      <option disabled selected>Select Room</option>
      <option>Room 1</option>
      <option>Room 2</option>
      <option>Room 3</option>
      <option>Room 4</option>
    </select>

    <select id="nurse">
      <option disabled selected>Select Nurse</option>
      <option>Nurse 1</option>
      <option>Nurse 2</option>
      <option>Nurse 3</option>
      <option>Nurse 4</option>
      <option>Nurse 5</option>
    </select>

    <select id="number">
      <option disabled selected>Select Number</option>
      <option>Number 1</option>
      <option>Number 2</option>
      <option>Number 3</option>
      <option>Number 4</option>
      <option>Number 5</option>
    </select>

    <button onclick="submitData()">Submit</button>
  </div>

  <div id="dataContainer"></div>

  <script>
    function displayData(data) {
      console.log('Data:', data);

      var dataContainer = document.getElementById('dataContainer');
      dataContainer.innerHTML = '';

      for (let key in data) {
        const entry = data[key];
        dataContainer.innerHTML += `
          <div>
            <p>Room: ${entry.room}</p>
            <p>Nurse: ${entry.nurse}</p>
            <p>Number: ${entry.number}</p>
            <p>Timestamp: ${entry.timestamp}</p>
          </div>
        `;
      }
    }
  </script>
</body>
</html>
