<!DOCTYPE html>
<html>
<head>
  <title>Spreadsheet Data</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

    const firebaseConfig = {
      // Your Firebase configuration
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.submitData = function(room) {
      const nurse = document.getElementById('nurse' + room).value;
      const number = document.getElementById('number' + nurse).value;
      const timestamp = new Date().toLocaleString();

      const data = {
        room,
        nurse,
        number,
        timestamp
      };

      set(ref(db, '/data/' + room), data);
    }

    for (let i = 1; i <= 4; i++) {
      const dataRef = ref(db, '/data/Room ' + i);
      onValue(dataRef, (snapshot) => {
        displayData('Room ' + i, snapshot.val());
      });
    }
  </script>
</head>
<body>
  <div id="dataContainer"></div>

  <div>
    <h2>Enter Data</h2>
    <div id="entryContainer"></div>
  </div>

  <script>
    const entryContainer = document.getElementById('entryContainer');
    const nurses = ['Jane Doe', 'John Smith', 'Emily Johnson', 'Michael Brown'];
    const numbers = ['123456789', '234567890', '345678901', '456789012'];

    for (let i = 0; i < 4; i++) {
      entryContainer.innerHTML += `
        <div>
          <h3>Nurse: ${nurses[i]}</h3>
          <input type="text" id="number${nurses[i]}" value="${numbers[i]}" readonly>
        </div>
      `;
    }

    for (let i = 1; i <= 4; i++) {
      entryContainer.innerHTML += `
        <div>
          <h3>Room ${i}</h3>
          <select id="nurseRoom ${i}">
            <option disabled selected>Select Nurse</option>
            ${nurses.map(nurse => `<option>${nurse}</option>`).join('')}
          </select>
          <button onclick="submitData('Room ${i}')">Submit</button>
        </div>
      `;
    }

    function displayData(room, data) {
      const dataContainer = document.getElementById('dataContainer');
      dataContainer.innerHTML = `
        <div>
          <p>${room}: ${data.nurse} <a href="tel:${data.number}">${data.number}</a> ${data.timestamp}</p>
        </div>
      ` + dataContainer.innerHTML;
    }
  </script>
</body>
</html>
